<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
      <title>Master HTML template include, standard Cato markup.</title>


<style type="text/css">
table.entry-parameters {
  width: 100%;
  border: 1px outset black;
}

table.entry-parameters td {
  padding-left: 1em;
  padding-right: 1em;
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border: 1px solid black;
}

table.entry-parameters td.entry-paramname {
  width: 20%;
}

.lib-entry-detail {
  font-style: italic;
  font-size: 0.6em;
}

.lib-entry-formalname {
  font-weight: bold;
}

.lib-entry-param-desc-extradesc {
  font-size: 0.8em;
}

.lib-entry-params-details {
  font-size: 0.8em;
}

ul {
  margin-top: 0.3em;
  margin-bottom: 0.4em;
}

pre {
  margin-top: 0.3em;
  margin-bottom: 0.4em;
}
</style>

  </head>
  <body>
  
  
  
    <div>
        <h1 class="lib-pagetitle">Master HTML template include, standard Cato markup.</h1>
        <h2>Template Building Documentation</h2>
        <p><em><span class="lib-filename">standard/htmlTemplate.ftl</span></em></p>

        <div class="lib-pagedesc">
      <p>
A set of HTML templating macros, part of standard Cato Freemarker API.
Automatically included at all times, unless overridden by properties or themes.
Intended to be swappable.
Includes all other default Cato macros.      </p>
      <p>
NOTES:
      </p>
        <div>  <ul>
      <li>
      <span>
Currently targeted toward Foundation CSS.      </span>
      </li>
      <li>
      <span>
Macros expect to be called using named arguments, except where otherwise noted.      </span>
      </li>
      <li>
      <span>
Functions in Freemarker only support positional arguments, but some Cato functions support
an &quot;args&quot; argument as a map, which emulates named arguments.      </span>
      </li>
  </ul>
</div>
      <p>
IMPLEMENTATION NOTES:
      </p>
        <div>  <ul>
      <li>
      <span>
Macros should almost never use &quot;request&quot; object directly - use setRequestVar/getRequestVar/other.      </span>
      </li>
  </ul>
</div>
      <p>
DEV NOTES:
      </p>
        <div>  <ul>
      <li>
      <span>
WARN: Documentation formatting is sensitive to whitespace, presence and number of asterisks (*),
      </span>
<pre>and line endings. Must be spaces-only and LF-only line endings.</pre>        <div>  <ul>
      <li>
      <span>
In parser, bullets will create HTML lists, text encloding in two bullets (* *) will create
a heading, notes with uppercase label and &quot;?&quot; or &quot;:&quot; prefix will be highlighted (support multi-
line by indenting the next line), and indents alone will create preformatted text (usually code).      </span>
      </li>
  </ul>
</div>
      </li>
      <li>
      <span>
Some macros use attribs and inlineAttribs args to specify extra HTML attribs.
Even though it would be convenient, we can&#39;t allow a &quot;attribString&quot; arg because no way
for macro to get attribs out of it if it needs them, cause problems.
FIXME: Not all macros currently properly check attribMap for duplicate attribs
      </span>
<pre>of args and inlineAttribs (priority should be: args - inlineAttribs - attribMap).</pre>      </li>
  </ul>
</div>
        <h4>MACRO INTERFACES</h4>
      <p>
Cato standard macros have versatile interfaces.      </p>
      <p>
General remarks:
      </p>
        <div>  <ul>
      <li>
      <span>
All macros expect to be invoked using named parameters only (always &lt;<a href="../standard/htmlStructure.html#entry-row">@row</a> class=&quot;my-class&quot;&gt;, never &lt;<a href="../standard/htmlStructure.html#entry-row">@row</a> &quot;my-class&quot;&gt;)      </span>
      </li>
      <li>
      <span>
Many macros have advanced, low-level open/close controls for esoteric structure control where the macro
markup open and close tags and logic needs to be split or skipped. Generally their defaults are true; must specify
      </span>
<pre>&lt;@macroname open=true close=false /&gt;</pre>      <span>

for open-only and
      </span>
<pre>&lt;@macroname close=true open=false /&gt;</pre>      <span>

for close-only.
Use of these in templates is discouraged but occasionally forcefully needed.      </span>
      </li>
      <li>
      <span>
These patterns are often workarounds for limitations in the FTL language.      </span>
      </li>
      <li>
      <span>
The advanced args pattern described below is primarily designed to be simple to use from templates, almost
indistinguishable from regular macro calls, but more powerful.
It also provides more power for theme overrides; however, theme overrides must be careful in their use of it;
it&#39;s better for themes to use simple markup overrides instead, which do not use the advanced pattern.      </span>
      </li>
  </ul>
</div>
      <p>
Template-facing macros (and advanced args pattern):
      </p>
        <div>  <ul>
      <li>
      <span>
These macros such as <a href="../standard/htmlForm.html#entry-field">@field</a>, <a href="../standard/htmlStructure.html#entry-row">@row</a>, <a href="../standard/htmlContent.html#entry-heading">@heading</a>, etc. are meant to be
used in templates and can also be overridden directly by themes (though not preferred method).
Most of these use a versatile args pattern that looks like:
      </span>
<pre>&lt;#macro macroname args={} inlineArgs...&gt;</pre>      </li>
      <li>
      <span>
When called from templates, these macros accept regular inlined parameters as well as a map of parameters
using the args map parameter. Intuitively, inline args have priority over args passed in the args map and in most cases simply override them.
This pattern is especially needed for themes to override the templating-facing macros cleanly and to provide a way
for template code to pass map content as arguments (not supported by Freemarker). It can be exploited
in a large number of ways (pass maps from groovy, callback macros, simplifying repeat calls, etc.) otherwise not possible.
Some non-template-facing macros also use this pattern, and some functions partly use it as well (but
Freemarker functions do not support named parameters at this time, so only partial pattern).
Some macros with this pattern also accept additional arbitrary inlined parameters to be used as extra HTML attributes (that can be passed
both in args map or inlineArgs, but usually it&#39;s used to emulate HTML with macros, thus inlineArgs);
these are not declared in the default argument lists; see individual macro documentation;
they are equivalent in usage to regular FTL interface macros that take extra attrbs as varargs
e.g.
      </span>
<pre>&lt;#macro myhtmlmacro (...) inlineAttribs...&gt;</pre>      <span>

IMPL NOTE: Extra attributions are handled by a system that records args names in a &quot;allArgNames&quot; member in
      </span>
<pre>the args map through the mergeArgMaps function. See mergeArgMaps function in utilities library for more details.</pre>      </li>
      <li>
      <span>
INTERFACE:
      </span>
<pre>&lt;#assign name_defaultArgs = { (...), &quot;passArgs&quot;:{} }&gt;
&lt;#macro macroname args={} inlineArgs...&gt;</pre>        <div>  <ul>
      <li>
      <span>
args: macro args map. map of parameters to pass to the macro. it can be a bean-wrapped map (from groovy/widgets) or simple FTL hash.
IMPL NOTE: the implementation should pass this to mergeArgMaps or equivalent function (see examples).      </span>
      </li>
      <li>
      <span>
inlineArgs: macro inline args. map of parameters passed inline to the macro via usual macro call syntax.
these have priority over args and generally will replace entries in the args map, with rare exceptions where noted.
IMPL NOTE: the implementation should pass this to mergeArgMaps or equivalent function (see examples).      </span>
      </li>
      <li>
      <span>
passArgs: pass-through args. map of args that should be passed along the major calls made by this macro or in other words
passed through the whole call stack. it allows arguments to pass through from the templating-facing macro
to the internal implementations such as markup macros, similar to a context. this is needed especially to allow theme overrides
to communicate with their markup macros without the use of globals, but it may be used for any other purpose.
be careful about using sufficiently unique names.
IMPL NOTE: overriding macros should avoid overriding this map; always add new members to it instead.
e.g.
      </span>
<pre>&lt;@somemacro passArgs=(passArgs + {&quot;myParam&quot;:&quot;myValue&quot;)&gt;</pre>      </li>
  </ul>
</div>
      </li>
  </ul>
</div>
      <p>
Markup macros (theme overrides):
      </p>
        <div>  <ul>
      <li>
      <span>
These macros such as @row_markup, @heading_markup, etc. containing
the &quot;_markup&quot; name are overridable by themes to provide alternative HTML and sometimes javascript markup.
This is the simplest and preferred way to provide alternate markup.
They do not have a versatile interface like the template-facing macros and are intentionally kept
simple.
      </span>
        <div>  <ul>
      <li>
      <span>
Nevertheless, they have some requirements: these macros should always end their parameter list with
a varargs catch-all parameter &quot;catchArgs...&quot; so that future changes do not backwards break compability
with themes.      </span>
      </li>
  </ul>
</div>
      </li>
      <li>
      <span>
INTERFACE:
      </span>
<pre>&lt;#macro macroname_markup (...) origArgs={} passArgs={} catchArgs...&gt;</pre>        <div>  <ul>
      <li>
      <span>
origArgs: original caller&#39;s args. map of complex parameters usually roughly as they were received by the calling macro. rarely-used and should be
avoided in favor of the other simpler macro arguments passed by the caller which are usually very similar. is
needed in rare cases where the simpler macro arguments are too simplistic or don&#39;t provide all the information needed.
NOTE: in general orig args do not come from a template-facing macro but from an intermediate macro
      </span>
<pre>(such as @fieldset_core or @field_input_widget). this is the intention, as the former would break
abstraction too much. in many cases however, the calling macro may happen to be
a template-facing macro. do not rely on this while using origArgs.</pre>      </li>
      <li>
      <span>
passArgs: pass-through args. map of args that are passed through from the template-facing macro to the parent/caller macro to
this macro or in other words passed through the whole call stack, similar to a context. this is needed especially to allow theme overrides
to communicate with their markup macros without the use of globals, but it may be used for any other purpose.
be careful about using sufficiently unique names.      </span>
      </li>
      <li>
      <span>
catchArgs: catch-all args. simply catches all the parameters the macro doesn&#39;t need to handle
NOTE: the previous parameters may be omitted and caught with catchArgs if unused.      </span>
      </li>
  </ul>
</div>
      </li>
  </ul>
</div>
      <p>
DEV NOTE: TODO: although the main macro patterns are mostly in place, there are still open questions about (re-)implementation
      </p>
<pre>and optimization using transforms (see mergeArgMaps and related).</pre>        </div>
    </div>
    


    <div class="lib-links">
      <h4>All libraries:</h4>
      <p>
        <a href="../standard/htmlContent.html">standard/htmlContent</a>, 
        <a href="../standard/htmlForm.html">standard/htmlForm</a>, 
        <a href="../standard/htmlInfo.html">standard/htmlInfo</a>, 
        <a href="../standard/htmlNav.html">standard/htmlNav</a>, 
        <a href="../standard/htmlScript.html">standard/htmlScript</a>, 
        <a href="../standard/htmlStructure.html">standard/htmlStructure</a>, 
        <a href="../standard/htmlTemplate.html">standard/htmlTemplate</a>, 
        <a href="../utilities.html">utilities</a>
      </p>
    </div>
    


    <footer id="footer">
      <div>
        <hr />
        <small>
          Copyright (c) 2014-2016 <a href="http://www.ilscipio.com" target="_blank">ilscipio GmbH</a>. Powered by <a href="http://www.cato-commerce.com" target="_blank">Cato Commerce</a> &amp; <a href="http://ofbiz.apache.org/" target=_blank>OFBiz</a>.
        </small>
      </div>
    </footer>

  </body>
</html>